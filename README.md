# task5
task5 by alfabattle

Условие
Необходимо реализовать сервис актуализации стоимости корзины покупателя.
Суть актуализации стоимости корзины в расчете цен на товары с учетом различных промо-акций и получении итоговой суммы чека и размера скидки.
Сервис предполагается использовать сразу многими магазинами.

Сервис должен иметь REST API на http://IP:8084 с двумя методами:
/promo – в теле POST запроса приходит список дескрипторов актуальных промо-акции (содержит как акции Сети, так и акции для магазинов).
Этот метод вызывается каждый раз перед запуском тестов.
/receipt – метод для актуализации цен, на вход в теле POST запроса приходит id магазина, список покупаемых товаров и список предъявленных документов на скидки (например, карта лояльности), 
на выход ожидается список товаров с корректными ценами и названиями, размером скидки, сумма чека и суммарный размер скидки.

При тестировании система каждый раз последовательно вызывает эти два метода: сначала /promo, потом /receipt.

* IP - внешний IP виртуальной машины.
* Все ресурсы лежат тут: https://github.com/evgenyshiryaev/alfa-battle-resources/tree/master/task5
Входные данные	
CSV файлы с неизменяемыми данными:
items.csv - список продаваемых товаров (id, название, id товарной группы, базовая цена товара);
groups.csv - товарные группы (id, название);
Файл с описанием API – api.yml

Общие замечания
В каждом магазине действуют единые промо-акции сети, а также локальные промо-акции, приоритет которых выше.
Если для позиции в чеке может применяться сразу несколько промо-акций, то выбирается промо-акция с наиболее высоким приоритетом.
Если для позиции чека подходят несколько промо-акций с одинаковым приоритетом, то нужно применять ту промо-акцию, которая даёт покупателю наибольшую скидку.
Округление следует проводить до 2 знаков с RoundingMode.HALF_EVEN.

!!! Автоматически будет проверяться только итоговая сумма чека и суммарная скидка, наличие и корректность позиций будет учитываться только на code review жюри !!!

Задачи
1. Без промо-акций
Пример:
Запрос: POST http://IP:8084/promo
{}
Ответ: 200
Запрос: POST http://IP:8084/receipt
{
  "shopId": 1,
  "loyaltyCard": false,
  "itemPositions":
  [
    {
      "itemId": "3432166",
      "quantity": 1
    }
  ]
}
Ответ: 200

{
  "total": 141.99,
  "discount": 0.00,
  "itemPositions":
  [
    {
      "id": "3432166",
      "name": "ЛУК.Жид.АНТИФ.G11 Green нез.1кг",
      "price": 141.99,
      "regularPrice": 141.99
    }
  ]
}
